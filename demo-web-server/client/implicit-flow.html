<!doctype html>
<html>
  <head>
    <title>Client - Implicit flow</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="oauth2.js"></script>
    <script>
      $(function() {
        var query = window.location.search;
        var parameters = [];

        if (query != null && query != "") {
          parameters = query.substring(1).split('&');
        }

        if (parameters.length == 0) {
          if (window.location.hash.length == 0) {
            implicit(client_id);
          } else {
            var oAuthToken = getAccessToken();
            var resourceUrl = "<p><a href='/protected/protected-apis.html?access_token="
                    + oAuthToken
                    + "'>Access oAuth 2.0 protected resources</a>"
            resourceUrl += "<p><a href='/api/notes?access_token="
                    + oAuthToken
                    + "'>Calling /api/notes</a>";

            displayMessage(resourceUrl);
          }
        } else {
          // alert(window.location);
          displayMessage(window.location);
        }
      });
    </script>
  </head>
  <body>
    <h1>OAuth 2.0 implicit flow</h1>
    <hr>
    <p>Message: <strong id='msg'></strong></p>
    <p><a href='/index.html'>Home</a></p>
  </body>
</html>
